/*
Header

Styles for elements within a header that has third-party code:

- FontAwesome icons
  (for Portal navigation)
- Bootstrap
  (for CMS navigation)
  (for Portal navigation)
- a subset of Bootstrap 3.3.7
  (for CMS body content, can affect navigation)

Markup: s-header.html.twig

Styleguide Trumps.Scopes.Header
*/
@import url("_imports/tools/selectors.css");
@import url("_imports/tools/x-arrow.css");





/* Container */

.s-header {
  /* FAQ: Other flex styles come from Bootstrap via `.navbar` */
  align-items: stretch;

  /* Make horizontal padding match the horizontal content buffer in Portal */
  /* FAQ: The `calc()` keeps track of disparate source of space values */
  /*      - 16px is 1rem from Portal (via `#sidebar .nav-content`) */
  /*      - 20px is from Portal (via `.nav-link`) */
  padding: 0 calc(16px + 20px);

  background-color: env(--header-bkgd-color);

  font-size: 12px; /* WARNING: Do not use `rem` until `html { 62.5%; }` */
  font-weight: bold;
  font-family: env(--header-font-family);

  /* Copied from Portal (via `body`) */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
/* To overwrite Portal which loads Bootstrap after header styles */
:--for-portal .s-header {
  padding: 0 calc(16px + 20px);
}

/* On wide viewport, prevent header resize from dynamic content */
@media (--wide-and-above) {
  /* CAVEAT: This is only for Portal and Docs which dynamically load content */
  .s-header {
    height: 55px;
  }
}





/* Logo */

.s-header .c-logo {
  height: 100%;

  /* To align position of first CMS nav link with Portal "Dashboard" header */
  /* NOTE: Each portal should set this value based on its image width */
  --offset: 10px;
  margin-right: var(--offset);

  /* FAQ: In case image does not load and browser shows alt text */
  color: env(--header-text-color);
}
/* Overwrite Bootstrap */
.s-header .c-logo.navbar-brand {
  padding-top: unset;
  padding-bottom: unset;
  display: unset;
}

.s-header .c-logo__image {
  padding-top: 5px;
  padding-bottom: 5px;
}





/* Navigation */

/* FAQ: Each relies on the parent also stretching */
.s-header,
:--for-portal .s-header,
.s-header .navbar-collapse {
  align-items: stretch;
}



/* Links */

/* RFE: Fix bug on the Internet so we can use these reliably */
/* SEE: https://github.com/postcss/postcss-custom-selectors/issues/40 */
/*
@custom-selector :--nav-link-hover  .s-header .nav-link:hover;
@custom-selector :--nav-link-focus  .s-header .nav-link:focus;
@custom-selector :--nav-link-active .s-header .nav-link:active;
@custom-selector :--nav-link-current
  .s-header .nav-item.active .nav-link,
  .s-header .nav-item.dropdown.show .nav-link;
*/

.s-header .nav-link {
  height: 100%;

  display: flex;
  align-items: center;
  /* FAQ: If link text uses 2 lines, header grows taller, but it must not */
  white-space: nowrap;

  color: env(--header-text-color);
}
.s-header .nav-link:hover,
.s-header .nav-link:active,
.s-header .nav-item.active .nav-link,
.s-header .nav-item.dropdown.show .nav-link {
  background-color: env(--header-link-bkgd-color);
}
.s-header .nav-link:hover,
.s-header .nav-link:focus,
.s-header .nav-link:active,
.s-header .nav-item.active .nav-link,
.s-header .nav-item.dropdown.show .nav-link {
  border-top: 4px solid transparent;
  border-bottom: 4px solid env(--header-accent-color);
}
/* Overwrite Bootstrap */
.s-header.navbar-dark .navbar-nav .nav-link,
.s-header.navbar-dark .navbar-nav .nav-link:focus,
.s-header.navbar-dark .navbar-nav .nav-link:hover {
  color: env(--header-text-color);
}
.s-header .nav-link {
  padding-top: unset;
  padding-bottom: unset;
}

@media (--wide-and-above) {
  .s-header .navbar-nav .nav-link,
  :--for-portal .s-header .navbar-nav .nav-link {
    padding-right: 1.25em; /* intent is 15px padding for 12px font */
    padding-left: 1.25em; /* intent is 15px padding for 12px font */
  }
}
@media (--wide-and-below) {
  .s-header .navbar-nav .nav-link,
  :--for-portal .s-header .navbar-nav .nav-link {
    padding-right: 0.5em; /* intent is just very narrow (dev design) */
    padding-left: 0.5em; /* intent is just very narrow (dev design) */
  }
}

.s-header .dropdown-toggle::after {
  @extend %x-arrow;

  --size: 4px;
  --line: 1px;
  --color: env(--header-text-color);
  margin-left: 8px;
}
.s-header .dropdown-toggle[aria-expanded="true"]::after {
  @extend %x-arrow--up;
  margin-top: 0.6em;
}
.s-header .dropdown-toggle[aria-expanded="false"]::after {
  @extend %x-arrow--down;
  margin-top: -0.4em;
}





/* Search */

/* GH-101: Retain search design until Wes works on it */
.s-header .s-search-bar,
.s-header .s-search-bar::part(input),
.s-header .s-search-bar::part(button) {
  font-size: 12px; /* WARNING: Do not use `rem` until `html { 62.5%; }` */
}

/* Create a line between search bar and login */
/* FAQ: The line should only exist if both elements are present */
.s-header .s-search-bar ~ .s-portal-nav {
  border-left: 1px solid env(--header-minor-border-color);

  margin-left: 12px;
}





/* Icons */

/* HACK: Using FontAwesome as placeholder */
.s-header [class*="fa-"] {
    width: 27px; /* (from Portal `.fa` 1.25em which FP-636 will deprecate) */
    text-align: center;
}
