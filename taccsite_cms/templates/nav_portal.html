{# @var className #}

{# WARNING: Some markup is duplicated in other repositories #}
{# SEE: https://confluence.tacc.utexas.edu/x/LoCnCQ #}
<ul class="s-portal-nav  {{ className }}" id="portal-nav">

  <!-- All Portal-controlled nav elements handled here. -->
  {# FAQ: Content populated via JavaScript, below #}

</ul>
<script type="module">
  import * as importHTML from '/static/site_cms/js/modules/importHTML.js';

  const container = document.getElementById('portal-nav');

  importHTML.insertFromURL('/core/markup/nav', container).then(container => {
    container.classList.add('js-content--is-loaded');
  });
</script>
<style>
  /* To have Portal Nav gently push—not abruptly shove—elements to make room */
  /* FAQ: Load Portal Nav with zero width, then transition to normal width */
  .s-portal-nav {
    flex-shrink: 0;

    transition: max-width 0.5s ease-out;
    max-width: 0;
  }
  .s-portal-nav.js-content--is-loaded {
    /* To let width grow, use explicit value, and not constrain width */
    /* FAQ: No support for transition to `width: auto` nor `max-width: 100%` */
    /* SEE: https://css-tricks.com/using-css-transitions-auto-dimensions/ */
    /* FAQ: Value is normal width of logged in nav with 8-char (max) username */
    /* CAVEAT: Change of space or dimension of portal nav items affects value */
    max-width: 212px;
  }
  /* To ensure content that is off screen does not cause scrollbar for <body> */
  /* FAQ: The specific conditional hide ensures dropdown menu is not hidden */
  .s-portal-nav .dropdown:not(.show) {
    overflow: hidden;
  }
</style>
